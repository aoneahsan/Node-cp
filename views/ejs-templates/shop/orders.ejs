<%- include('./../../includes/header.ejs', {successMessage: successMessage,
warningMessage: warningMessage, errorMessage: errorMessage}) %>
<main class="text-center mt-5">
    <div class="container">
        <% if(orders.length > 0) { %>
        <div class="list-group">
            <% orders.forEach((order, index) => { %>
            <li
                class="list-group-item list-group-item-action flex-column align-items-start text-left"
            >
                <div class="d-flex w-100 justify-start">
                    <h5 class="mb-3">Order # <%= index+1 %></h5>
                </div>
                <ul class="list-group">
                    <li class="list-group-item active">Items:</li>
                    <% order.products.forEach((product, index) => { %>
                    <li class="list-group-item">
                        <%= index+1 %>)
                        <strong><%= product.title %></strong>
                        -
                        <strong>Quantity:</strong>
                        <%= product.quantity %>
                    </li>
                    <% }) %>
                    <li class="list-group-item bg-dark text-light">
                        Total Price: $<%= order.orderTotalPrice %>
                        <a class="btn btn-outline-light btn-sm ml-5" href="/orders/<%= order._id %>/get-invoice">
                            Get Invoice
                        </a>
                    </li>
                </ul>
            </li>
            <% }) %>
        </div>
        <% } else { %>
        <h1><%= pageTitle %></h1>
        <p>No Order Found. Place one now!</p>
        <% } %>
    </div>
</main>
<%- include('./../../includes/footer.ejs') %>
